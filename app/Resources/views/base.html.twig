<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        
        <title>{% block title %}Mini-net : le réseau social familial{% endblock %}</title>
        
        {% block stylesheets %}
            <link href="{{ asset('bootstrap/css/bootstrap.css') }}" rel="stylesheet">
            <style type="text/css">
                {# TODO relocate this in a dedicated css file #}
                body {
                    padding-top: 60px;
                    padding-bottom: 40px;
                }
                .very-close{
                    margin-top:3px;
                    margin-bottom:3px;
                    padding: 4px;
                    padding-left: 8px;
                    max-width: 100%;
                }
            </style>
            <link href="{{ asset('lightbox/css/lightbox.css') }}" rel="stylesheet" />
        {% endblock %}
        
        <link rel="shortcut icon" href="{{ asset('favicon.ico') }}" />
    </head>
    <body>
        {% block header %}
        <div class="navbar navbar-fixed-top navbar-inverse">
            <div class="navbar-inner">
                <div class="container">
                    <a class="brand" href="{{ path('root') }}">Mini-net</a>

                    {% set currentPath = app.request.attributes.get('_route') %}
                    {% set classHome = '' %}
                    {% set classAlbum = '' %}
                    {% if currentPath == 'home' %}
                        {% set classHome = ' active' %}
                    {% elseif currentPath == 'album' %}
                        {% set classAlbum = ' active' %}
                    {% endif %}    

                    <!-- nav menu -->
                    <ul class="nav">
                        <li class="{{ classHome }}"><a href="{{ path('home') }}">Accueil</a></li>
                        <li class="{{ classAlbum }}"><a href="{{ path('album') }}">Albums</a></li>
                    </ul>
                     {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
             <ul class="nav pull-right">
                        <a class="btn btn-success" href="{{ path('new_post') }}">
                            Ajouter des nouvelles
                        </a>
                        <li class="divider-vertical"></li>
                        <a class="btn" id="user-logout-button" href="{{ path('fos_user_security_logout') }}">
                            <i class="icon-user" id="user-logout-icon"></i> 
                            {{ app.user.username }}
                        </a>

                    </ul>
                    {% endif %}
                    
                </div>
            </div>
        </div>
        {% endblock %}
        
        <div class="container">
        
        {% block body %}
        {% endblock %}
        
        {% block footer %}
            <hr>
            <center>
                <p><span class="label label-info">mini-net</span> , le réseau social familial le plus simple au monde</p>
            </center>
        {% endblock %}
        
        </div><!-- container-->
        
        {% block javascripts %}
            <script src="{{ asset('jquery/jquery-1.7.2.min.js') }}"></script>
            <script src="{{ asset('bootstrap/js/bootstrap.js') }}"></script>
            <script src="{{ asset('lightbox/js/lightbox.js') }}"></script>
            <script>
                function mouseOverLogoutListener(e){
                    document.getElementById("user-logout-button").className='btn btn-danger';
                    document.getElementById("user-logout-icon").className='icon-arrow-right icon-white';
                }
                function mouseOutLogoutListener(e){
                    document.getElementById("user-logout-button").className='btn';
                    document.getElementById("user-logout-icon").className='icon-user';
                }
                document.getElementById("user-logout-button").addEventListener('mouseover', mouseOverLogoutListener, false);
                document.getElementById("user-logout-button").addEventListener('mouseout', mouseOutLogoutListener, false);
            </script>
        {% endblock %}
        
    </body>
</html>
